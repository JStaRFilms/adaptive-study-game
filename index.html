<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adaptive Study Game</title>
    <script>
      // Polyfill for Promise.withResolvers() to support older browsers
      if (typeof Promise.withResolvers !== 'function') {
        Promise.withResolvers = function withResolvers() {
          let resolve, reject;
          const promise = new Promise((res, rej) => {
            resolve = res;
            reject = rej;
          });
          return { promise, resolve, reject };
        };
      }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&family=Merriweather:wght@400;700&family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              // New theme colors from user's CSS
              'case-desk': '#4a3b31',
              'case-paper': '#fdfaf1',
              'case-paper-lines': '#e0d9c9',
              'case-text-primary': '#2c251e',
              'case-text-secondary': '#7a6a5b',
              'case-accent-red': '#b71c1c',
              'case-cork': '#c5a98b',
              'case-folder-bg': '#e6d8b1',
              'case-folder-border': '#d1b88a',
              
              // Original theme colors
              'brand-primary': '#14b8a6', // Teal 500
              'brand-secondary': '#0f766e', // Teal 700
              'background-dark': '#111827', // Gray 900
              'surface-dark': '#1f2937', // Gray 800
              'text-primary': '#f9fafb', // Gray 50
              'text-secondary': '#d1d5db', // Gray 300
              'correct': '#22c55e', // Green 500
              'incorrect': '#ef4444', // Red 500
            },
            fontFamily: {
              'display': ['"Special Elite"', 'monospace'],
              'serif': ['"Merriweather"', 'serif'],
              'sans': ['"Inter"', 'ui-sans-serif', 'system-ui', '-apple-system', 'BlinkMacSystemFont', '"Segoe UI"', 'Roboto', '"Helvetica Neue"', 'Arial', '"Noto Sans"', 'sans-serif', '"Apple Color Emoji"', '"Segoe UI Emoji"', '"Segoe UI Symbol"', '"Noto Color Emoji"'],
            },
            animation: {
              'fade-in': 'fadeIn 0.5s ease-out forwards',
              'fade-in-down': 'fadeInDown 0.6s ease-out forwards',
              'background-pan': 'backgroundPan 15s linear infinite',
              'float': 'float 6s ease-in-out infinite',
              'pulse-glow': 'pulseGlow 4s ease-in-out infinite',
              // New animations for landing page
              'hero-entry': 'heroEntry 1.5s ease-out forwards',
              'twinkle': 'twinkle 3s infinite',
              'float-particle': 'floatParticle 8s infinite linear',
              'gradient-shift': 'gradientShift 4s ease-in-out infinite',
              'pulse-ring': 'pulseRing 3s infinite',
              'spin': 'spin 1s linear infinite',
            },
            keyframes: {
              fadeIn: {
                '0%': { opacity: 0 },
                '100%': { opacity: 1 },
              },
              fadeInDown: {
                '0%': { opacity: 0, transform: 'translateY(-20px)' },
                '100%': { opacity: 1, transform: 'translateY(0)' },
              },
              backgroundPan: {
                  '0%': { backgroundPosition: '0% 50%' },
                  '50%': { backgroundPosition: '100% 50%' },
                  '100%': { backgroundPosition: '0% 50%' },
              },
              float: {
                '0%': { transform: 'translateY(0px)' },
                '50%': { transform: 'translateY(-10px)' },
                '100%': { transform: 'translateY(0px)' },
              },
              pulseGlow: {
                '0%, 100%': {
                  borderColor: 'rgba(20, 184, 166, 0.4)',
                  boxShadow: '0 0 20px rgba(20, 184, 166, 0.2)',
                },
                '50%': {
                  borderColor: 'rgba(20, 184, 166, 0.8)',
                  boxShadow: '0 0 35px rgba(20, 184, 166, 0.5)',
                },
              },
              // New keyframes for landing page
              heroEntry: {
                '0%': { opacity: 0, transform: 'translateY(50px)' },
                '100%': { opacity: 1, transform: 'translateY(0)' },
              },
              twinkle: {
                '0%, 100%': { opacity: 0.3, transform: 'scale(1)' },
                '50%': { opacity: 1, transform: 'scale(1.2)' },
              },
              floatParticle: {
                  '0%': { transform: 'translateY(100vh) rotate(0deg)', opacity: 0 },
                  '10%': { opacity: 1 },
                  '90%': { opacity: 1 },
                  '100%': { transform: 'translateY(-100px) rotate(360deg)', opacity: 0 },
              },
              gradientShift: {
                '0%, 100%': { backgroundPosition: '0% 50%' },
                '50%': { backgroundPosition: '100% 50%' },
              },
              pulseRing: {
                '0%': { transform: 'translate(-50%, -50%) scale(1)', opacity: 0.7 },
                '100%': { transform: 'translate(-50%, -50%) scale(2)', opacity: 0 },
              },
              spin: {
                  '0%': { transform: 'rotate(0deg)' },
                  '100%': { transform: 'rotate(360deg)' },
              }
            }
          }
        }
      }
    </script>
  <script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.1.0/",
    "react": "https://esm.sh/react@^19.1.0",
    "react-dom/": "https://esm.sh/react-dom@^19.1.0/",
    "@google/genai": "https://esm.sh/@google/genai@^1.10.0",
    "mammoth": "https://esm.sh/mammoth@^1.9.1",
    "xlsx": "https://esm.sh/xlsx@^0.18.5",
    "pdfjs-dist": "https://esm.sh/pdfjs-dist@^5.3.93",
    "jspdf": "https://esm.sh/jspdf@^2.5.1",
    "html2canvas": "https://esm.sh/html2canvas@^1.4.1",
    "idb": "https://esm.sh/idb@^8.0.0",
    "@vercel/analytics/react": "https://esm.sh/@vercel/analytics@^1.3.1/react",
    "@vercel/analytics/": "https://esm.sh/@vercel/analytics@^1.3.1/",
    "@vercel/speed-insights/react": "https://esm.sh/@vercel/speed-insights@^1.2.0/react",
    "@vercel/speed-insights/": "https://esm.sh/@vercel/speed-insights@^1.2.0/"
  }
}
</script>
<style>
  body {
    overflow-x: hidden;
  }
  .fade-in-section {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }
  .fade-in-section.is-visible {
    opacity: 1;
    transform: translateY(0);
  }
  .bg-pattern {
    background-color: #4a3b31;
    background-image: url("data:image/svg+xml,%3Csvg width='52' height='26' viewBox='0 0 52 26' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%233a2e26' fill-opacity='0.4'%3E%3Cpath d='M10 10c0-2.21-1.79-4-4-4-3.314 0-6-2.686-6-6h2c0 2.21 1.79 4 4 4 3.314 0 6 2.686 6 6 0 2.21 1.79 4 4 4 3.314 0 6 2.686 6 6 0 2.21 1.79 4 4 4v2c-3.314 0-6-2.686-6-6 0-2.21-1.79-4-4-4-3.314 0-6-2.686-6-6zm25.464-1.95l8.486 8.486-1.414 1.414-8.486-8.486 1.414-1.414z' /%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  }
  
  /* Custom Range Slider Styles from Mockup */
  input[type="range"].case-slider {
      -webkit-appearance: none; appearance: none;
      width: 100%;
      height: 6px;
      background: #e0d9c9;
      outline: none;
      border-radius: 3px;
      border: 1px solid #ccc;
  }
  input[type="range"].case-slider::-webkit-slider-thumb {
      -webkit-appearance: none; appearance: none;
      width: 20px;
      height: 20px;
      background: #b71c1c;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid white;
      box-shadow: 1px 1px 3px rgba(0,0,0,0.4);
  }
  
  /* Evidence Board Styles */
  .cork-board {
    background-color: #c5a98b;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiGAAABAlBMVEUAAADVQwDQRQDQRQDPRgDPRgDPRgDPQwDPRgDPRQDRRADQRgDQRQDRRgDPRQDQRgDQRgDPRQDQRgDPRQDPRgDQRQDRRgDPRQDQRQDTQwDRRgDSRAAVGAAYHQAWIgAcJgAfLgAmNAAvPQBCXgBGZgBJbQBOeQBRggBUjQBamgBfqQCGwwCKxwCOyQCTzQCW0gCY0wCa1wCh2gCl3ACp3wCs4gC15gC56gC97ADF7wDG8ADJ8QDN9ADU9wDX+ADe+gDk/ADo/QDq/QDw/gD1/wD3/wD8/wD+/wD+/wD+/wD+/wD+/wD+/wD+/wD+/wD+/wD+/wD+/wD+/wD+/wD+/wCVxoZ/AAAAV3RSTlMAAQIDBAUGBwgJCgsMDQ4PEBITFBUWFxgZGhscHR4fICEiIyQlJicpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ucG5S2gQJAAAAlklEQVRIx+3Wxw2DQBCF4XkACUqgBAoQhXr//1fUksJaK2tbz+a+ZGe3zVwAANhms3fbr3u4W5g5jMv2h9dGihV2D2MGB4PQhzi0eZyD2eB8vN/S4sHn8cGhLPB8lBweB8+Xh4OD4+H5kMPh4fLw//p7eHg8vD4eHh/vg+/D4+Pj/fsdAAA2s3s2z/a4m5g5hMv2h9tGig12D2MGB4PQhzi0eZyD2eB8vN/S4sHn8cGhLPB8lBweB8+Xh4OD4+H5kMPh4fLw//p7eHg8vD4eHh/vg+/D4+Pj/fsdAAD2srs2z/a4m5g5hMv2h9tGig12D2MGB4PQhzi0eZyD2eB8vN/S4sHn8cGhLPB8lBweB8+Xh4OD4+H5kMPh4fLw//p7eHg8vD4eHh/vg+/D4+Pj/fsdAAD2srs2z/a4m5g5hMv2h9tGig12D2MGB4PQhzi0eZyD2eB8vN/S4sHn8cGhLPB8lBweB8+Xh4OD4+H5kMPh4fLw//p7eHg8vD4eHh/vg+/D4+Pj/fsdAAD2srs2z/a4m5g5hMv2h9tGig12D2MGB4PQhzi0eZyD2eB8vN/S4sHn8cGhLPB8lBweB8+Xh4OD4+H5kMPh4fLw//p7eHg8vD4eHh/vg+/D4+Pj/fsd+AHUrQDwA25bUgAAAABJRU5ErkJggg==);
    box-shadow: inset 0 0 10px rgba(0,0,0,0.4);
  }
  
  .evidence-folder {
      background-color: #e6d8b1;
      border: 1px solid #d1b88a;
      box-shadow: 1px 1px 3px rgba(0,0,0,0.2);
  }
  
  .folder-tab {
      top: -1px;
      left: 1rem;
      background-color: inherit;
      border: 1px solid #d1b88a;
      border-bottom: none;
      transform: translateY(-100%);
  }

  .paper-section textarea {
      background-image: repeating-linear-gradient(#fdfaf1 0px, #fdfaf1 24px, #e0d9c9 25px);
  }
  
  /* New styles for game-like landing page */
  .bg-game-landing {
    background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
  }
  .text-gradient {
    background-size: 300% 300%;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle 3s infinite;
  }
  .particle {
      position: absolute;
      background: linear-gradient(45deg, #61dafb, #20232a);
      border-radius: 50%;
      animation: float-particle 8s infinite linear;
  }
  
  /* Custom styles for markdown content in chat/review */
  .prose .table-wrapper {
    overflow-x: auto;
    width: 100%;
    margin-top: 1em;
    margin-bottom: 1em;
    border-radius: 8px;
    border: 1px solid #4a5568; /* Border on the container */
  }
  .prose .table-wrapper table {
    /* width: 100% has been removed to allow table to expand naturally */
    border-collapse: collapse;
  }
  .prose .table-wrapper th, 
  .prose .table-wrapper td {
    padding: 0.75em 1em;
    color: inherit;
    white-space: nowrap;
    text-align: left;
    border-bottom: 1px solid #4a5568;
  }
  .prose .table-wrapper th {
    background-color: #1f2937; /* surface-dark / gray-800 */
    font-weight: bold;
  }
  .prose .table-wrapper tr:last-child td {
    border-bottom: none;
  }

  .prose code:not(pre > code) {
    background-color: #2d3748;
    padding: 0.1em 0.3em;
    border-radius: 4px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 0.9em;
  }
  .prose pre {
    background-color: #111827; /* background-dark / gray-900 from tailwind */
    padding: 1em;
    border-radius: 8px;
    overflow-x: auto;
    color: inherit;
  }
  .prose pre code {
    padding: 0;
    background-color: transparent;
    border-radius: 0;
    font-size: 1em;
  }

  /* Styles for Sequence Question type */
  .sequence-item {
    background: #111827; /* background-dark */
    border-radius: 10px;
    padding: 1rem;
    margin-bottom: 0.75rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    position: relative;
    display: flex;
    align-items: center;
    gap: 15px;
  }
  .sequence-item.answered {
    cursor: not-allowed;
  }
  .sequence-item.answered:hover {
    transform: none;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }
  .sequence-item:not(.answered):hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
    border-color: #14b8a6; /* brand-primary */
  }
  .sequence-item.dragging {
    opacity: 0.8;
    transform: rotate(2deg) scale(1.02);
    cursor: grabbing;
    z-index: 1000;
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
  }
  .sequence-item.drag-over {
    border-color: #3b82f6; /* A neutral blue for drop target */
    background: #2563eb20;
  }
  .drag-handle {
    color: #9ca3af; /* gray-400 */
    font-size: 1.5rem;
    cursor: grab;
    padding: 5px;
    border-radius: 4px;
    transition: all 0.2s ease;
    touch-action: none;
  }
  .drag-handle:hover {
    background: #374151; /* gray-700 */
    color: #f9fafb; /* gray-50 */
  }
  .sequence-number {
    background-color: #0f766e; /* brand-secondary */
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 1rem;
    flex-shrink: 0;
  }

  /* Custom scrollbar for webkit browsers */
  .overflow-y-auto::-webkit-scrollbar,
  .pretty-scrollbar::-webkit-scrollbar {
    width: 8px;
  }

  .overflow-y-auto::-webkit-scrollbar-track,
  .pretty-scrollbar::-webkit-scrollbar-track {
    background: #1f2937; /* surface-dark */
    border-radius: 10px;
  }

  .overflow-y-auto::-webkit-scrollbar-thumb,
  .pretty-scrollbar::-webkit-scrollbar-thumb {
    background: #4b5563; /* gray-600 */
    border-radius: 10px;
  }

  .overflow-y-auto::-webkit-scrollbar-thumb:hover,
  .pretty-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #6b7280; /* gray-500 */
  }
  
</style>
<link rel="stylesheet" href="/index.css">
</head>
  <body class="bg-background-dark text-text-primary font-sans">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>